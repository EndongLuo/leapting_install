{"version":3,"file":"js/2.3aa8bb45.js","mappings":"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","sources":["webpack://leapting_install/./src/components/L_table/index.vue","webpack://leapting_install/src/components/L_table/index.vue","webpack://leapting_install/./src/components/L_table/index.vue?9914","webpack://leapting_install/./src/components/L_table/index.vue?ffa0","webpack://leapting_install/./src/views/robots/behaviorInfo.vue","webpack://leapting_install/./src/mixin/index.js","webpack://leapting_install/src/views/robots/behaviorInfo.vue","webpack://leapting_install/./src/views/robots/behaviorInfo.vue?ab45","webpack://leapting_install/./src/views/robots/behaviorInfo.vue?0842"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"L_table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.filterData,\"stripe\":true,\"default-expand-all\":\"\"}},[_vm._l((_vm.column),function(c){return _c('div',{key:c.id},[_c('el-table-column',{attrs:{\"prop\":c.prop,\"label\":c.label,\"width\":c.width}},[(c.prop == 'status')?_c('div',[_c('el-switch',{attrs:{\"prop\":c.prop,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"}})],1):_vm._e()])],1)}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"Operate\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.tableName=='behaviorInfo')?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleSend(scope.row)}}},[_c('span',[_vm._v(_vm._s(_vm.$t('table.send')))])]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleClick(scope.row)}}},[_vm._v(\" \"+_vm._s(_vm.$t('table.edit'))+\" \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleStop()}}},[_c('span',[_vm._v(_vm._s(_vm.$t('table.stop')))])])]}}])})],2),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"pager-count\":_vm.pageCount,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"L_table\">\n    <!-- 表格内容 -->\n    <el-table :data=\"filterData\"\n          :stripe=\"true\"\n          default-expand-all\n      style=\"width: 100%\">\n      <div v-for=\"c in column\" :key=\"c.id\">\n        <el-table-column :prop=\"c.prop\" :label=\"c.label\" :width=\"c.width\">\n          <div v-if=\"c.prop == 'status'\">\n            <el-switch\n              :prop=\"c.prop\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n            >\n            </el-switch>\n          </div>\n        </el-table-column>\n      </div>\n\n      <el-table-column fixed=\"right\" label=\"Operate\" width=\"150\">\n        <template slot-scope=\"scope\">\n          <!-- <el-button @click=\"handleClick(scope.row)\" type=\"text\" size=\"small\">\n            分配角色\n          </el-button> -->\n          <!-- <el-button v-if=\"tableName=='behaviorInfo'\" @click=\"handleSend(scope.row)\" type=\"text\" size=\"small\">\n            <span style=\"color: #409EFF;\">{{$t('table.send')}}</span>\n          </el-button> -->\n           <el-button v-if=\"tableName=='behaviorInfo'\" @click=\"handleSend(scope.row)\" type=\"primary\" size=\"small\">\n            <span >{{$t('table.send')}}</span>\n          </el-button>\n          <el-button v-else @click=\"handleClick(scope.row)\" type=\"primary\" size=\"small\">\n            {{$t('table.edit')}}\n          </el-button>\n\n          <!-- <el-button @click=\"handleDelete(scope.row,scope.$index,tableData)\" type=\"danger\" size=\"small\">\n            <span >{{$t('table.delete')}}</span>\n          </el-button> -->\n          <el-button @click=\"handleStop()\"  type=\"danger\" size=\"small\">\n            <span >{{$t('table.stop')}}</span>\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页器 -->\n    <el-pagination\n      background\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"currentPage\"\n      :pager-count=\"pageCount\"\n      :page-sizes=\"[10, 20, 50, 100]\"\n      :page-size=\"pageSize\"\n      layout=\"total, sizes, prev, pager, next\"\n      :total=\"total\"\n    >\n    </el-pagination>\n  </div>\n</template>\n  \n<script>\nimport { mapState } from 'vuex';\nexport default {\n  props: [\"tableData\", \"column\", \"tableName\"],\n  data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      pageCount: 5,\n      // status:false,\n    };\n  },\n  computed: {\n    total() {\n      return this.tableData.length;\n    },\n    filterData(){\n      let begin = (this.currentPage - 1) * this.pageSize;\n      let end = this.currentPage * this.pageSize;\n      return this.tableData.slice( begin, end);\n    },\n    ...mapState('ros',['ros'])\n  },\n  methods: {\n    handleClick(row) {\n      console.log(row);\n    },\n    handleSend(row) {\n      console.log({behavior_name:row.behavior_name});\n      this.$emit('sendGoal',{behavior_name:row.behavior_name})\n    },\n    handleStop(){\n      this.$emit('isCancel','aaa')\n    },\n    handleDelete(row,index,list) {\n      this.$confirm(`此操作将永久删除该文件: ${row.behavior_name}`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          center: true,\n          type: 'warning'\n        }).then(() => {\n          var trig_pub = new ROSLIB.Topic({\n            ros:this.ros,\n            name:'/trig',\n            messageType:'std_msgs/Header'\n          })\n          trig_pub.publish({frame_id:`flexbe_delete:${row.behavior_name}`});\n          list.splice(index,1)\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });          \n        });\n    },\n    // 分页器\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    handleCurrentChange(val) {\n      this.currentPage=val;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.el-pagination{\n  margin-top: 20px;\n  float: right;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=51ed4ebe&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=51ed4ebe&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51ed4ebe\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"send_cancel\"},[_c('el-input',{attrs:{\"placeholder\":\"Task Name\",\"clearable\":\"\"},model:{value:(_vm.goalMsg.behavior_name),callback:function ($$v) {_vm.$set(_vm.goalMsg, \"behavior_name\", $$v)},expression:\"goalMsg.behavior_name\"}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.sendGoal(_vm.goalMsg)}}},[_vm._v(_vm._s(_vm.$t('table.send')))]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.isCancel}},[_vm._v(_vm._s(_vm.$t('table.stop')))])],1),_c('L_table',{attrs:{\"tableData\":_vm.filterData,\"column\":_vm.column,\"tableName\":\"behaviorInfo\"},on:{\"sendGoal\":_vm.sendGoal,\"isCancel\":_vm.isCancel}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// src/mixin/index.js\nimport { mapState } from 'vuex';\nexport const mixins = {\n  data() {\n    return {\n      goon:0,\n      isShow: 0,\n      isInstall: 0,\n      isVideo: 0,\n      isThree: 0,\n      flexbeSwitch: true,\n      pvm_num: 50,\n      goal: null,\n    };\n  },\n  computed: {\n    ...mapState('ros',['ros']),\n  },\n  created() {},\n  mounted() {\n    this.start\n  },\n  methods: {\n    // 开始第一次\n    start(id) {\n      // 暂停继续\n      if(this.goon){this.Pause();return;} \n      this.flexbeSwitch = false;\n      this.isInstall = id;\n      if (this.isInstall) this.$message(this.$t('prompt.switchMode'));\n      else if (id == 1) {\n        this.isShow = id;\n        this.isInstall = id;\n        var auto = id == 1 ? false : true;\n        this.$message.success('Start Installation.');\n        this.sendGoal(auto, 50);\n      }\n      else {\n        this.$prompt(this.$t('prompt.inputNum'), this.$t('prompt.prompt'), {\n          confirmButtonText: this.$t('mains.confirm'),\n          cancelButtonText: this.$t('mains.cancel'),\n          inputPattern: /[1-9]{1}\\d{0,3}/,\n          inputErrorMessage: this.$t('prompt.inputErrorMessage')\n        }).then(({ value }) => {\n          this.isShow = id;\n          this.isInstall = id;\n          var auto = id == 1 ? false : true;\n\n          this.$message.success('success: ' + value);\n\n          // this.pvm_num = value;\n          console.log(Number(value));\n          this.sendGoal(auto, value);\n        }).catch(() => {\n          this.isInstall = 0;\n          this.flexbeSwitch =true;\n          this.isShow = 0;\n          this.$message(this.$t('mains.cancel'));\n        });\n      }\n    },\n\n    // 发送goal\n    sendGoal(auto, pvm_num) {\n\n      var ls = localStorage.getItem('pvm_param')\n      const { pvm } = JSON.parse(ls);\n\n      var goalMsg = new ROSLIB.Message({\n        behavior_name: 'CommInstallPVM',\n        arg_keys: ['auto', 'pvm_num', 'pvm_width', 'install_gap'],\n        arg_values: [`${auto}`, `${pvm_num}`, pvm.pvm_width, pvm.install_gap]\n      });\n      // console.log(goalMsg);\n\n      var actionClient = new ROSLIB.ActionClient({\n        ros: this.ros,\n        actionName: 'flexbe_msgs/BehaviorExecutionAction',\n        serverName: '/flexbe/execute_behavior'\n      });\n      this.goal = new ROSLIB.Goal({\n        actionClient: actionClient,\n        goalMessage: goalMsg\n      });\n\n      // this.goal.send();\n\n      this.goal.on('feedback', (feedback) => {\n        this.$message(`feedback: ${JSON.stringify(feedback)}`);\n        console.log('Feedback: ', feedback);\n      });\n\n      this.goal.on('result', (result) => {\n        this.$message(`result: ${JSON.stringify(result)}`);\n        console.log('Final Result: ', result);\n      });\n    },\n\n\n    // 任务暂停\n    Pause(){\n      this.goon=1;\n      var pause_sub = new ROSLIB.Topic({\n        ros: this.ros,\n        name: '/flexbe/command/pause',\n        messageType: 'std_msgs/Bool'\n      });\n\n      if (this.flexbeSwitch) {\n        this.$message.success('Go on.');\n        this.flexbeSwitch = false;\n      }\n      else {\n        this.$message('Pause');\n        this.flexbeSwitch = true;\n      }\n\n      console.log(this.flexbeSwitch);\n      pause_sub.publish({ \"data\": this.flexbeSwitch });\n    },\n  },\n\n  // 任务停止\n  Stop() {\n    var stop_sub = new ROSLIB.Topic({\n      ros: this.ros,\n      name: '/flexbe/command/preempt',\n      messageType: 'std_msgs/Empty'\n    });\n    stop_sub.publish({});\n    this.$message.success('Installation Stopped.');\n    this.isInstall = 0;\n    this.flexbeSwitch =true;\n    this.isVideo = 0;\n    this.isThree = 0;\n    this.isShow = 0;\n    this.goon = 0;\n  },\n};","<template>\n  <div>\n    <div class=\"send_cancel\">\n      <el-input placeholder=\"Task Name\" v-model=\"goalMsg.behavior_name\" clearable>\n      </el-input>\n      <el-button type=\"primary\" @click=\"sendGoal(goalMsg)\">{{ $t('table.send') }}</el-button>\n      <!-- <el-button type=\"warning\"  @click=\"Pause(goalMsg)\">{{$t('install.pause')}}</el-button> -->\n      <el-button type=\"danger\" @click=\"isCancel\">{{ $t('table.stop') }}</el-button>\n    </div>\n    <L_table :tableData=\"filterData\" :column=\"column\" @sendGoal=\"sendGoal\" @isCancel=\"isCancel\"\n      tableName=\"behaviorInfo\" />\n  </div>\n</template>\n  \n<script>\nimport L_table from \"@/components/L_table\";\nimport { mapState } from 'vuex';\nimport { reqBehaviorList } from \"@/api\";\nimport { mixins } from \"@/mixin/index\";\n\nexport default {\n  components: { L_table, },\n  data() {\n    return {\n      tableData: [],\n      column: [\n        {\n          id: '004',\n          prop: 'behavior_tag',\n          label: 'Tag',\n          width: 150\n        },\n        {\n          id: '001',\n          prop: 'uid',\n          label: 'Sr.No.',\n          width: 100\n        }, {\n          id: '002',\n          prop: 'behavior_name',\n          label: 'Task',\n          width: 200\n        },\n        {\n          id: '003',\n          prop: 'behavior_msg',\n          label: 'Description'\n        },\n      ],\n      goalMsg: {\n        behavior_name: ''\n      },\n      goal: null,\n    };\n  },\n  mixins: [mixins],\n  computed: {\n    ...mapState('ros', ['ros','flexbeParams']),\n    filterData() {\n      return this.tableData.filter((p) => {//返回过滤后的数组\n        return p.behavior_name.indexOf(this.goalMsg.behavior_name) !== -1\n      })//filter是过滤函数去除了不包含关键字的情况\n    }\n  },\n  mounted() {\n    this.behaviorList();\n    // this.getBehaviorList();\n  },\n  methods: {\n    // 筛选flexbe参数\n    filterParam(name) {\n      try {\n        var params = this.flexbeParams[name];\n        if (!params) return { arg_keys: [], arg_values: [] };\n\n        return { arg_keys: Object.keys(params), arg_values: Object.values(params) }\n      } catch (error) {\n        return { arg_keys: [], arg_values: [] }\n      }\n    },\n    // 行为列表\n    behaviorList() {\n      // 订阅该主题\n      var rosTopic = new ROSLIB.Topic({\n        ros: this.ros,\n        name: 'flexbe/behavior_list',\n        messageType: 'std_msgs/String',\n      });\n\n      rosTopic.subscribe((message) => {\n        this.tableData = [];\n        var msg = JSON.parse(message.data);\n        var num = 1;\n        for (let key in msg) {\n          if (msg[key].tag !== 'hide') {\n            this.tableData.push({\n              uid: num++,\n              behavior_name: key,\n              behavior_msg: msg[key].description,\n              behavior_tag: msg[key].tag,\n            })\n          }\n        }\n      })\n    },\n\n    // 发送goal\n    sendGoal(goalMsg) {\n      console.log(goalMsg);\n      if (goalMsg.behavior_name == 'CommUninstallPVM'||goalMsg.behavior_name == 'CommInUninstall') {\n        this.$prompt(this.$t('prompt.uninputNum'), this.$t('prompt.prompt'), {\n          confirmButtonText: this.$t('mains.confirm'),\n          cancelButtonText: this.$t('mains.cancel'),\n          inputPattern: /[1-9]{1}\\d{0,3}/,\n          inputErrorMessage: this.$t('prompt.inputErrorMessage')\n        }).then(({ value }) => {\n\n          this.$message.success('success: ' + value);\n\n          // this.pvm_num = value;\n          console.log(Number(value));\n          this.CommInstall(Number(value),goalMsg);\n        }).catch(() => {\n          this.$message(this.$t('mains.cancel'));\n        });\n      }\n      else {\n        console.log('goalMsg',goalMsg);\n        var { arg_keys, arg_values } = this.filterParam(goalMsg.behavior_name);\n        var goalMessage = new ROSLIB.Message({\n          behavior_name: goalMsg.behavior_name,\n          arg_keys,\n          arg_values\n        });\n        this.actionClient(goalMessage);\n      }\n    },\n    // 发送goal\n    CommInstall(pvm_num,goalMsg) {\n      // var goalMessage = new ROSLIB.Message({\n      //   behavior_name: 'CommUninstallPVM',\n      //   arg_keys: ['pvm_sum'],\n      //   arg_values: [`${pvm_num}`]\n      // });\n\n      var { arg_keys, arg_values } = this.filterParam(goalMsg.behavior_name);\n        var goalMessage = new ROSLIB.Message({\n          behavior_name: goalMsg.behavior_name,\n          arg_keys: ['pvm_sum',...arg_keys],\n          arg_values: [`${pvm_num}`, ...arg_values]\n        });\n\n      console.log(goalMessage);\n\n      this.actionClient(goalMessage);\n    },\n\n    actionClient(goalMessage) {\n      var actionClient = new ROSLIB.ActionClient({\n        ros: this.ros,\n        actionName: 'flexbe_msgs/BehaviorExecutionAction',\n        serverName: '/flexbe/execute_behavior'\n      });\n      this.goal = new ROSLIB.Goal({ actionClient, goalMessage });\n\n      console.log(this.goal);\n      this.goal.send();\n\n      this.goal.on('feedback', (feedback) => {\n        // this.$message(`feedback: ${JSON.stringify(feedback)}`);\n        console.log('Feedback: ', feedback);\n      });\n\n      this.goal.on('result', (result) => {\n        // this.$message(`result: ${JSON.stringify(result)}`);\n        if (result.outcome == 'preempted') this.$message(`task over！`);\n        console.log('Final Result: ', result);\n      });\n    },\n\n    Pause() {\n      this.goon = 1;\n      var pause_sub = new ROSLIB.Topic({\n        ros: this.ros,\n        name: '/flexbe/command/pause',\n        messageType: 'std_msgs/Bool'\n      });\n\n      if (this.flexbeSwitch) {\n        this.$message.success('Go on.');\n        this.flexbeSwitch = false;\n      }\n      else {\n        this.$message('Pause');\n        this.flexbeSwitch = true;\n      }\n\n      console.log(this.flexbeSwitch);\n      pause_sub.publish({ \"data\": this.flexbeSwitch });\n    },\n\n    // 取消行为\n    isCancel(a) {\n      console.log(a);\n      if (this.goal) {\n        this.$message('行为取消！');\n        this.goal.cancel();\n      }\n    },\n\n    // 测试虚拟数据\n    // async getBehaviorList(){\n    //   var res = await reqBehaviorList();\n    //   var msg = res.data.data;\n    //   var num=1\n    //     for (let key in msg) {\n    //       this.tableData.push({\n    //         uid:num++, \n    //         behavior_name: key, \n    //         behavior_msg: msg[key].description,\n    //         behavior_tag: msg[key].tag,\n    //       })\n    //     }\n    // },\n  },\n};\n</script>\n  \n<style scoped>\n.send_cancel {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.el-input {\n  margin-right: 10px;\n}\n</style>\n  ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./behaviorInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./behaviorInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./behaviorInfo.vue?vue&type=template&id=60df478b&scoped=true&\"\nimport script from \"./behaviorInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./behaviorInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./behaviorInfo.vue?vue&type=style&index=0&id=60df478b&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60df478b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","filterData","_l","column","c","key","id","prop","label","width","_e","scopedSlots","_u","fn","scope","tableName","on","$event","handleSend","row","_v","_s","$t","handleClick","handleStop","currentPage","pageCount","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","props","data","computed","methods","console","behavior_name","handleDelete","confirmButtonText","cancelButtonText","center","type","ros","name","messageType","trig_pub","frame_id","list","message","component","model","value","goalMsg","callback","$$v","$set","expression","sendGoal","isCancel","mixins","goon","isShow","isInstall","isVideo","isThree","flexbeSwitch","pvm_num","goal","mapState","created","mounted","start","Pause","$message","auto","success","$prompt","inputPattern","inputErrorMessage","then","log","Number","catch","ls","localStorage","getItem","pvm","JSON","parse","ROSLIB","Message","arg_keys","arg_values","pvm_width","install_gap","actionClient","ActionClient","actionName","serverName","Goal","goalMessage","feedback","stringify","result","pause_sub","Topic","publish","Stop","stop_sub","components","L_table","tableData","filterParam","behaviorList","rosTopic","uid","behavior_msg","behavior_tag","CommInstall"],"sourceRoot":""}